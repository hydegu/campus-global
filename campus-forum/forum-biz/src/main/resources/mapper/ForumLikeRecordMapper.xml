<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.example.forum.biz.mapper.ForumLikeRecordMapper">

    <resultMap id="BaseResultMap" type="com.example.forum.api.entity.ForumLikeRecord">
        <id property="id" column="id" />
        <result property="userId" column="user_id" />
        <result property="likeType" column="like_type"/>
        <result property="likeId" column="like_id"/>
        <result property="createAt" column="created_at"/>
    </resultMap>
    <insert id="addLikeRecord" >
        INSERT INTO forum_like_record (user_id, like_type, like_id, create_at)
        VALUES (#{likeDTO.userId}, #{likeDTO.likeType}, #{likeDTO.likeId}, NOW())

    </insert>
    <delete id="subLikeRecord" >
        DELETE FROM forum_like_record
        WHERE user_id = #{likeDTO.userId} AND like_type = #{likeDTO.likeType} AND like_id = #{likeDTO.likeId}

    </delete>
    <select id="getLikeRecord" resultMap="BaseResultMap">
        select * from forum_like_record
        where user_id = #{likeDTO.userId} AND like_type = #{likeDTO.likeType} AND like_id = #{likeDTO.likeId}
    </select>
</mapper>